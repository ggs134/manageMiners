<!DOCTYPE html>
<!-- saved from url=(0041)http://bootstrapk.com/examples/dashboard/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://bootstrapk.com/favicon.ico">

    <title>프로젝트 골드러시 대시보드</title>

    <!-- Bootstrap core CSS -->
    <link href="{{url_for('static', filename='bootstrap.min.css')}}" rel="stylesheet" type=text/css>
    <!-- <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}"> -->

    <!-- Custom styles for this template -->
    <link href="{{url_for('static', filename='dashboard.css')}}" rel="stylesheet" type=text/css>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="{{url_for('static', filename='ie-emulation-modes-warning.js')}}"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://onther.iptime.org:5000#">Goldrush</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://onther.iptime.org:5000#">Dashboard</a></li>
            <li><a href="http://onther.iptime.org:5000#">Settings</a></li>
            <li><a href="http://onther.iptime.org:5000#">Profile</a></li>
            <li><a href="http://onther.iptime.org:5000#">Help</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <!-- <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="http://onther.iptime.org:5000#">Overview <span class="sr-only">(current)</span></a></li>
            <li><a href="http://onther.iptime.org:5000#">Reports</a></li>
            <li><a href="http://onther.iptime.org:5000#">Analytics</a></li>
            <li><a href="http://onther.iptime.org:5000#">Export</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="http://onther.iptime.org:5000#">Nav item</a></li>
            <li><a href="http://onther.iptime.org:5000#">Nav item again</a></li>
            <li><a href="http://onther.iptime.org:5000#">One more nav</a></li>
            <li><a href="http://onther.iptime.org:5000#">Another nav item</a></li>
            <li><a href="http://onther.iptime.org:5000#">More navigation</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="http://onther.iptime.org:5000#">Nav item again</a></li>
            <li><a href="http://onther.iptime.org:5000#">One more nav</a></li>
            <li><a href="http://onther.iptime.org:5000#">Another nav item</a></li>
          </ul>
        </div> -->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">골드러시 대시보드</h1>

          <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
              <!-- <img data-src="holder.js/200x200/auto/sky?text=Hello" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzBEOEZEQiIvPjxnPjx0ZXh0IHg9Ijc0LjA1NDY4NzUiIHk9IjEwMCIgc3R5bGU9ImZpbGw6I0ZGRkZGRjtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjIwMHgyMDA8L3RleHQ+PC9nPjwvc3ZnPg=="> -->
              <!-- <img data-src="holder.js/200x200/auto/sky"> -->
              <h2 id="total-machines">가동장비</h2>
              <span class="text-muted">가동장비</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <!-- <img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM5REJBQyIvPjxnPjx0ZXh0IHg9Ijc0LjA1NDY4NzUiIHk9IjEwMCIgc3R5bGU9ImZpbGw6IzFFMjkyQztmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjIwMHgyMDA8L3RleHQ+PC9nPjwvc3ZnPg==" data-holder-rendered="true"> -->
              <h2 id="total-hash">총해시량</h2>
              <span class="text-muted">총해시량</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <!-- <img data-src="holder.js/200x200/auto/sky" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzBEOEZEQiIvPjxnPjx0ZXh0IHg9Ijc0LjA1NDY4NzUiIHk9IjEwMCIgc3R5bGU9ImZpbGw6I0ZGRkZGRjtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjIwMHgyMDA8L3RleHQ+PC9nPjwvc3ZnPg==" data-holder-rendered="true"> -->
              <h2>{{lastMined | round(3)}} Ether</h2>
              <span class="text-muted">지난24시간채굴량</span>
            </div>
            <!-- <div class="col-xs-6 col-sm-3 placeholder">
              <img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="200x200" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM5REJBQyIvPjxnPjx0ZXh0IHg9Ijc0LjA1NDY4NzUiIHk9IjEwMCIgc3R5bGU9ImZpbGw6IzFFMjkyQztmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjIwMHgyMDA8L3RleHQ+PC9nPjwvc3ZnPg==" data-holder-rendered="true">
              <h4>1일예상수입(ETH)</h4>
              <span class="text-muted">1일예상채수입(ETH)</span>
            </div> -->
          </div>

          <h2 class="sub-header">마이닝정보</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>마이너번호</th>
                  <th>해시값</th>
                  <!-- <th>재부팅</th>
                  <th>온도1</th>
                  <th>온도2</th>
                  <th>온도3</th>
                  <th>온도4</th>
                  <th>온도5</th>
                  <th>온도6</th> -->
                </tr>
              </thead>
              <tbody>
                {% for num in machines %}
                <tr class={{num}}>
                  <td id="miner{{num}}">{{num}}</td>
                  <td id="hash{{num}}"></td>
                  <!-- <td><button type=button class="btn btn-default">재부팅</button></td> -->
                  <!-- <td id='gpu{{num}}1'></td>
                  <td id='gpu{{num}}2'></td>
                  <td id='gpu{{num}}3'></td>
                  <td id='gpu{{num}}4'></td>
                  <td id='gpu{{num}}5'></td>
                  <td id='gpu{{num}}6'></td> -->
                </tr>
                {% endfor %}
              </tbody>
            </table>
            <!-- <div id="log">hi</div> -->
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{url_for('static', filename='jquery.min.js')}}" ></script>
    <script src="{{url_for('static', filename='bootstrap.min.js')}}" ></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="{{url_for('static', filename='holder.js')}}" ></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="{{url_for('static', filename='ie10-viewport-bug-workaround.js')}}" ></script>
    <!-- socketio  -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

    <script type="text/javascript" charset="utf-8">
      $(document).ready(function(){
        namespace = '/jsh';
        // tailScroll();
        var socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
        // socket.on('connect', function() {
        //     socket.emit('my event', {data: 'I\'m connected!'});
        // });
        socket.on('gpu status', function(msg) {
                    // $('#log').append('<br>' + $('<div/>').text('Received  : ' + msg.temp).html());
                    $("#hash"+msg.cardNum).html(msg.hash+" MH/s");
                    var parsedTemp = JSON.parse(msg.temp);
                    for(var i=1; i<parsedTemp.length+1; i++){
                      $('#gpu'+msg.cardNum+i).html(parsedTemp[i-1]);
                    };

                    // tailScroll();
                });
        socket.on('miningpoolhub status', function(msg) {
          var total_num = msg.data.length;

          // Holder.addTheme("vine", {text: msg.data.length });
          // Holder.run();
          // console.log(msg.data.length);
          // // var parsedData = JSON.parse(msg.data);
          // console.log(msg.data);
          var total_hash = 0;
          for(var miner in msg.data){
            // var minerNum = miner["username"].substring(13);
            var data = msg.data[miner];
            var minerNum = data["username"].substring(13);
            // console.log(minerNum);
            // console.log("hash"+minerNum);

            $('#hash'+minerNum).html((data["hashrate"]/1000).toFixed(1)+" MH/s").css("background-color","transparent");
            if(data["hashrate"] == 0) {
              total_num -= 1;
              $('#hash'+minerNum).css("background-color", "red");
            };
            total_hash += data["hashrate"]/1000000;
          };
          $('#total-hash').html(total_hash.toFixed(2)+" GH/s");
          $('#total-machines').html(total_num+" / 35");

        });

        // function tailScroll() {
        //     var height = $("#log").get(0).scrollHeight;
        //     $("#log").animate({
        //         scrollTop: height
        //     }, 500);
        // };



      });
      </script>



<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200" preserveAspectRatio="none" style="visibility: hidden; position: absolute; top: -100%; left: -100%;"><defs></defs><text x="0" y="10" style="font-weight:bold;font-size:10pt;font-family:Arial, Helvetica, Open Sans, sans-serif;dominant-baseline:middle">200x200</text></svg></body></html>
